generator client {
  provider = "prisma-client-js"
  // Use cjs module format to avoid ESM issues in Node.js environments
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
  // Note: Connection URL is handled by prisma.config.ts and @prisma/adapter-pg
  // Do NOT set url here in Prisma v7+ when using an adapter
}

model User {
  id               String          @id @default(cuid())
  email            String          @unique
  password         String
  name             String?
  fullName         String?
  role             Role            @default(CLIENT)
  isActive         Boolean         @default(true)
  twoFactorSecret  String?
  resetToken       String?
  resetTokenExpiry DateTime?
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt
  employerId       String?
  auditLogs        AuditLog[]
  businesses       Business[]
  payments         Payment[]
  sessions         Session[]
  subscriptions    Subscription[]
  tickets          Ticket[]        @relation("TicketCreator")
  ticketMessages   TicketMessage[]
  employer         Business?       @relation("BusinessEmployees", fields: [employerId], references: [id])
  // CRM relations
  assignedLeads    CrmLead[]        @relation("AssignedTo")
  crmLeadNotes     CrmLeadNote[]    @relation("UserCrmNotes")
}

model Business {
  id                       String                  @id @default(cuid())
  userId                   String
  name                     String
  activityType             ActivityType
  language                 String                  @default("ar")
  status                   BusinessStatus          @default(TRIAL)
  trialEndsAt              DateTime?
  botTone                  String                  @default("friendly")
  primaryColor             String                  @default("#6366F1")
  /** Widget variant selection: STANDARD or ENHANCED */
  widgetVariant            WidgetVariant           @default(STANDARD)
  widgetConfig             String?
  messageQuota             Int                     @default(1000)
  messagesUsed             Int                     @default(0)
  planType                 PlanType                @default(TRIAL)
  createdAt                DateTime                @default(now())
  updatedAt                DateTime                @updatedAt
  crmLeadCollectionEnabled Boolean                 @default(false)
  preChatFormEnabled       Boolean                 @default(false)
  apiIntegrations          APIIntegration[]
  user                     User                    @relation(fields: [userId], references: [id])
  crmIntegrations          CRMIntegration[]
  conversations            Conversation[]
  customAIModels           CustomAIModel[]
  dashboardConfigs         DashboardConfig[]
  improvementFeedback      ImprovementFeedback[]
  improvementGoals         ImprovementGoal[]
  improvementSuggestions   ImprovementSuggestion[]
  integrations             Integration[]
  knowledgeBase            KnowledgeBase[]
  knowledgeGaps            KnowledgeGap[]
  notifications            Notification[]
  payments                 Payment[]
  subscriptions            Subscription[]
  telegramIntegration      TelegramIntegration?
  tickets                  Ticket[]
  employees                User[]                  @relation("BusinessEmployees")
  whatsAppIntegration      WhatsAppIntegration?
  crmLeads                 CrmLead[]

  @@index([userId])
  @@index([status])
  @@index([planType])
  @@index([createdAt])
  @@index([userId, status])
  @@index([userId, createdAt])
}

model Ticket {
  id         String          @id @default(cuid())
  businessId String
  creatorId  String
  subject    String
  status     TicketStatus    @default(OPEN)
  priority   TicketPriority  @default(MEDIUM)
  createdAt  DateTime        @default(now())
  updatedAt  DateTime        @updatedAt
  business   Business        @relation(fields: [businessId], references: [id], onDelete: Cascade)
  creator    User            @relation("TicketCreator", fields: [creatorId], references: [id])
  messages   TicketMessage[]

  @@index([businessId])
  @@index([creatorId])
}

model TicketMessage {
  id               String   @id @default(cuid())
  ticketId         String
  senderId         String
  message          String
  isAdmin          Boolean  @default(false)
  createdAt        DateTime @default(now())
  isReadByBusiness Boolean  @default(false)
  isReadByCreator  Boolean  @default(false)
  sender           User     @relation(fields: [senderId], references: [id])
  ticket           Ticket   @relation(fields: [ticketId], references: [id], onDelete: Cascade)

  @@index([ticketId])
  @@index([senderId])
}

model KnowledgeBase {
  id              String           @id @default(cuid())
  businessId      String
  type            KnowledgeType
  content         String
  embedding       Json?
  metadata        Json?
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  category        String?
  status          String           @default("ACTIVE")
  title           String?
  business        Business         @relation(fields: [businessId], references: [id], onDelete: Cascade)
  knowledgeChunks KnowledgeChunk[]

  @@index([businessId])
  @@index([type])
  @@index([createdAt])
}

model KnowledgeChunk {
  id               String                 @id @default(cuid())
  knowledgeBaseId  String
  businessId       String
  content          String
  embedding        Json?
  metadata         Json?
  createdAt        DateTime               @default(now())
  embedding_vector Unsupported("vector")?
  knowledgeBase    KnowledgeBase          @relation(fields: [knowledgeBaseId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([knowledgeBaseId])
  @@index([businessId, knowledgeBaseId])
}

model Conversation {
  id                 String                 @id @default(cuid())
  businessId         String
  channel            Channel                @default(WIDGET)
  externalId         String?
  status             ConversationStatus     @default(ACTIVE)
  rating             Int?
  feedback           String?
  agentId            String?
  agentRating        Int?
  agentFeedback      String?
  visitorSessionId   String?
  createdAt          DateTime               @default(now())
  updatedAt          DateTime               @updatedAt
  preChatData        String?
  handoffs           AgentHandoff[]
  business           Business               @relation(fields: [businessId], references: [id], onDelete: Cascade)
  visitorSession     VisitorSession?        @relation(fields: [visitorSessionId], references: [id])
  analytics          ConversationAnalytics?
  languageDetections LanguageDetection[]
  messages           Message[]
  sentimentAnalyses  SentimentAnalysis[]

  @@index([businessId])
  @@index([externalId])
  @@index([visitorSessionId])
  @@index([status])
  @@index([createdAt])
  @@index([businessId, createdAt])
  @@index([businessId, status])
  @@index([businessId, status, createdAt])
}

model SystemLog {
  id        String   @id @default(cuid())
  level     String
  message   String
  context   Json?
  createdAt DateTime @default(now())

  @@index([level])
  @@index([createdAt])
}

model AuditLog {
  id        String   @id @default(cuid())
  userId    String?
  action    String
  entity    String?
  entityId  String?
  changes   Json?
  meta      Json?
  ipAddress String?
  userAgent String?
  createdAt DateTime @default(now())
  user      User?    @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([createdAt])
  @@index([entity])
  @@index([action])
}

model Notification {
  id         String   @id @default(cuid())
  businessId String
  title      String
  message    String
  link       String?
  meta       Json?
  isRead     Boolean  @default(false)
  level      String   @default("info")
  createdAt  DateTime @default(now())
  business   Business @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([isRead])
  @@index([createdAt])
}

model Message {
  id               String       @id @default(cuid())
  conversationId   String
  role             MessageRole
  content          String
  tokensUsed       Int          @default(0)
  wasFromCache     Boolean      @default(false)
  aiModel          String?
  createdAt        DateTime     @default(now())
  isReadByBusiness Boolean      @default(false)
  isReadByVisitor  Boolean      @default(false)
  conversation     Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@index([conversationId])
  @@index([createdAt])
  @@index([conversationId, createdAt])
  @@index([role])
  @@index([conversationId, role, createdAt])
  @@index([wasFromCache])
  @@index([conversationId, wasFromCache])
}

model Integration {
  id         String          @id @default(cuid())
  businessId String
  type       IntegrationType
  config     Json
  isActive   Boolean         @default(true)
  createdAt  DateTime        @default(now())
  updatedAt  DateTime        @updatedAt
  business   Business        @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
}

model Session {
  id        String   @id @default(cuid())
  userId    String
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([token])
}

model MessageCache {
  id         String   @id @default(cuid())
  businessId String
  query      String
  response   String
  hitCount   Int      @default(1)
  createdAt  DateTime @default(now())
  lastUsedAt DateTime @default(now())

  @@index([businessId])
  @@index([lastUsedAt])
}

model AIModel {
  id        String   @id @default(cuid())
  name      String   @unique
  apiKey    String
  endpoint  String
  maxTokens Int      @default(1000)
  isActive  Boolean  @default(true)
  priority  Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model SystemSetting {
  key         String   @id
  value       String
  description String?
  updatedAt   DateTime @updatedAt
}

model VisitorSession {
  id              String         @id @default(cuid())
  businessId      String
  fingerprint     String
  isActive        Boolean        @default(true)
  lastActivity    DateTime       @default(now())
  ipAddress       String?
  country         String?
  countryCode     String?
  city            String?
  region          String?
  timezone        String?
  detectedDialect String?
  userAgent       String?
  browser         String?
  browserVersion  String?
  os              String?
  device          String?
  isMobile        Boolean        @default(false)
  referrer        String?
  utmSource       String?
  utmMedium       String?
  utmCampaign     String?
  utmTerm         String?
  utmContent      String?
  pageViews       Int            @default(0)
  totalDuration   Int            @default(0)
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  endedAt         DateTime?
  conversations   Conversation[]
  pageVisits      PageVisit[]

  @@index([businessId])
  @@index([fingerprint])
  @@index([ipAddress])
  @@index([isActive])
  @@index([createdAt])
}

model PageVisit {
  id          String         @id @default(cuid())
  sessionId   String
  url         String
  title       String?
  path        String
  duration    Int?
  enteredAt   DateTime       @default(now())
  exitedAt    DateTime?
  scrollDepth Int?
  clicks      Int            @default(0)
  session     VisitorSession @relation(fields: [sessionId], references: [id], onDelete: Cascade)

  @@index([sessionId])
  @@index([path])
  @@index([enteredAt])
}

model UserAnalytics {
  id         String   @id @default(cuid())
  businessId String
  userId     String
  ipAddress  String?
  country    String?
  city       String?
  userAgent  String?
  browser    String?
  os         String?
  device     String?
  action     String
  metadata   Json?
  createdAt  DateTime @default(now())

  @@index([businessId])
  @@index([userId])
  @@index([action])
  @@index([createdAt])
}

model CustomAIModel {
  id              String               @id @default(cuid())
  businessId      String
  name            String
  baseModel       String
  description     String?
  status          AIModelStatus        @default(TRAINING)
  trainingData    Json?
  hyperparameters Json?
  performance     Json?
  version         String               @default("1.0.0")
  isActive        Boolean              @default(false)
  deployedAt      DateTime?
  createdAt       DateTime             @default(now())
  updatedAt       DateTime             @updatedAt
  generations     AIModelGeneration[]
  trainingJobs    AIModelTrainingJob[]
  business        Business             @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([status])
  @@index([isActive])
}

model AIModelTrainingJob {
  id          String         @id @default(cuid())
  modelId     String
  status      TrainingStatus @default(PENDING)
  progress    Float          @default(0.0)
  error       String?
  startedAt   DateTime?
  completedAt DateTime?
  metrics     Json?
  model       CustomAIModel  @relation(fields: [modelId], references: [id], onDelete: Cascade)

  @@index([modelId])
  @@index([status])
}

model AIModelGeneration {
  id           String        @id @default(cuid())
  modelId      String
  query        String
  response     String
  tokensUsed   Int
  responseTime Int
  feedback     Json?
  createdAt    DateTime      @default(now())
  model        CustomAIModel @relation(fields: [modelId], references: [id], onDelete: Cascade)

  @@index([modelId])
  @@index([createdAt])
}

model LanguageDetection {
  id               String       @id @default(cuid())
  conversationId   String
  messageId        String
  detectedLanguage String
  detectedDialect  String?
  confidence       Float
  translation      String?
  targetLanguage   String?
  createdAt        DateTime     @default(now())
  conversation     Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@index([conversationId])
  @@index([detectedLanguage])
  @@index([detectedDialect])
}

model SentimentAnalysis {
  id             String        @id @default(cuid())
  conversationId String
  messageId      String
  sentiment      SentimentType
  confidence     Float
  emotions       Json?
  keywords       Json?
  intensity      Float
  createdAt      DateTime      @default(now())
  conversation   Conversation  @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@index([conversationId])
  @@index([sentiment])
  @@index([createdAt])
}

model ConversationAnalytics {
  id               String       @id @default(cuid())
  conversationId   String       @unique
  businessId       String
  messageCount     Int          @default(0)
  userMessageCount Int          @default(0)
  aiMessageCount   Int          @default(0)
  avgResponseTime  Int
  totalDuration    Int
  topics           Json?
  sentimentTrend   Json?
  engagementScore  Float?
  resolutionStatus String?
  primaryLanguage  String?
  primaryDialect   String?
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  conversation     Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@index([conversationId])
  @@index([businessId])
  @@index([createdAt])
}

model AgentHandoff {
  id             String          @id @default(cuid())
  conversationId String
  businessId     String
  agentId        String
  requestedBy    String
  reason         String
  priority       HandoffPriority @default(MEDIUM)
  status         HandoffStatus   @default(PENDING)
  qualityScore   Int?
  feedback       String?
  resolvedAt     DateTime?
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  conversation   Conversation    @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@index([conversationId])
  @@index([businessId])
  @@index([agentId])
  @@index([status])
  @@index([priority])
}

model WhatsAppIntegration {
  id            String    @id @default(cuid())
  businessId    String    @unique
  phoneNumberId String
  accessToken   String
  appSecret     String
  webhookUrl    String
  isActive      Boolean   @default(true)
  lastVerified  DateTime?
  messageQuota  Int       @default(1000)
  messagesUsed  Int       @default(0)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  business      Business  @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([phoneNumberId])
}

model TelegramIntegration {
  id           String    @id @default(cuid())
  businessId   String    @unique
  botToken     String
  botUsername  String
  webhookUrl   String
  isActive     Boolean   @default(true)
  lastVerified DateTime?
  messageQuota Int       @default(1000)
  messagesUsed Int       @default(0)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  business     Business  @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([botUsername])
}

model APIIntegration {
  id         String        @id @default(cuid())
  businessId String
  name       String
  type       APIType
  baseUrl    String
  apiKey     String?
  authType   String        @default("bearer")
  headers    Json?
  isActive   Boolean       @default(true)
  rateLimit  Int           @default(100)
  lastUsed   DateTime?
  createdAt  DateTime      @default(now())
  updatedAt  DateTime      @updatedAt
  endpoints  APIEndpoint[]
  business   Business      @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([type])
}

model APIEndpoint {
  id             String         @id @default(cuid())
  integrationId  String
  name           String
  method         String
  path           String
  description    String?
  parameters     Json?
  responseSchema Json?
  integration    APIIntegration @relation(fields: [integrationId], references: [id], onDelete: Cascade)

  @@index([integrationId])
}

model CRMIntegration {
  id            String    @id @default(cuid())
  businessId    String
  type          CRMType
  apiUrl        String
  apiKey        String
  username      String?
  password      String?
  isActive      Boolean   @default(true)
  lastSync      DateTime?
  syncFrequency Int       @default(3600)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  business      Business  @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([type])
}

model DashboardConfig {
  id         String            @id @default(cuid())
  businessId String
  name       String
  layout     Json
  theme      Json?
  isDefault  Boolean           @default(false)
  isPublic   Boolean           @default(false)
  shareToken String?           @unique
  createdAt  DateTime          @default(now())
  updatedAt  DateTime          @updatedAt
  business   Business          @relation(fields: [businessId], references: [id], onDelete: Cascade)
  widgets    DashboardWidget[]

  @@index([businessId])
  @@index([isDefault])
  @@index([shareToken])
}

model DashboardWidget {
  id          String          @id @default(cuid())
  dashboardId String
  type        WidgetType
  title       String
  config      Json
  position    Json
  isVisible   Boolean         @default(true)
  createdAt   DateTime        @default(now())
  updatedAt   DateTime        @updatedAt
  dashboard   DashboardConfig @relation(fields: [dashboardId], references: [id], onDelete: Cascade)

  @@index([dashboardId])
  @@index([type])
}

model ImprovementFeedback {
  id             String   @id @default(cuid())
  businessId     String
  conversationId String?
  userId         String?
  rating         Int
  feedback       String?
  category       String?
  source         String   @default("user")
  createdAt      DateTime @default(now())
  business       Business @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([conversationId])
  @@index([rating])
  @@index([category])
  @@index([createdAt])
}

model KnowledgeGap {
  id               String      @id @default(cuid())
  businessId       String
  query            String
  frequency        Int         @default(1)
  lastSeen         DateTime    @default(now())
  status           GapStatus   @default(OPEN)
  priority         GapPriority @default(MEDIUM)
  suggestedContent String?
  resolvedAt       DateTime?
  createdAt        DateTime    @default(now())
  updatedAt        DateTime    @updatedAt
  business         Business    @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([status])
  @@index([priority])
  @@index([lastSeen])
}

model ImprovementSuggestion {
  id            String           @id @default(cuid())
  businessId    String
  gapId         String?
  type          SuggestionType
  title         String
  description   String
  impact        SuggestionImpact @default(MEDIUM)
  effort        SuggestionEffort @default(MEDIUM)
  status        SuggestionStatus @default(PENDING)
  implementedAt DateTime?
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt
  business      Business         @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([type])
  @@index([status])
  @@index([impact])
}

model ImprovementGoal {
  id           String     @id @default(cuid())
  businessId   String
  title        String
  description  String
  metric       String
  targetValue  Float
  currentValue Float      @default(0)
  deadline     DateTime
  status       GoalStatus @default(ACTIVE)
  progress     Float      @default(0)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  business     Business   @relation(fields: [businessId], references: [id], onDelete: Cascade)

  @@index([businessId])
  @@index([status])
  @@index([deadline])
}

model CrmLead {
  id             String     @id @default(cuid())
  businessId     String
  name           String
  email          String?
  phone          String?
  requestSummary String
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt
  source         LeadSource @default(PRE_CHAT_FORM)
  conversationId String?
  business       Business   @relation(fields: [businessId], references: [id], onDelete: Cascade)

  // Assignment and status
  status     CrmLeadStatus @default(NEW)
  assignedTo String?      // User ID of agent assigned
  assigned   User?        @relation("AssignedTo", fields: [assignedTo], references: [id])
  notes      CrmLeadNote[]

  @@map("crm_leads")
}

enum CrmLeadStatus {
  NEW
  CONTACTED
  QUALIFIED
  LOST
  WON
}

// Notes attached to leads (agents / admins can add notes)
model CrmLeadNote {
  id        String   @id @default(cuid())
  leadId    String
  lead      CrmLead  @relation(fields: [leadId], references: [id], onDelete: Cascade)
  authorId  String?
  author    User?    @relation("UserCrmNotes", fields: [authorId], references: [id])
  message   String   @db.Text
  createdAt DateTime @default(now())

  @@index([leadId])
  @@index([authorId])
}

model PaymentGateway {
  id            String          @id @default(cuid())
  provider      PaymentProvider @unique
  name          String
  isEnabled     Boolean         @default(false)
  isActive      Boolean         @default(true)
  apiKey        String?
  secretKey     String?
  merchantId    String?
  webhookSecret String?
  config        Json?
  metadata      Json?
  displayName   String?
  icon          String?
  description   String?
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  payments      Payment[]

  @@index([isEnabled])
  @@index([isActive])
}

model Payment {
  id                String          @id @default(cuid())
  businessId        String
  userId            String
  amount            Float
  currency          String          @default("SAR")
  status            PaymentStatus   @default(PENDING)
  gatewayId         String
  provider          PaymentProvider
  transactionId     String?
  paymentMethod     String?
  planType          PlanType?
  messageQuota      Int?
  customAmount      Boolean         @default(false)
  customDescription String?
  webhookData       Json?
  webhookVerified   Boolean         @default(false)
  metadata          Json?
  failureReason     String?
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt
  paidAt            DateTime?
  business          Business        @relation(fields: [businessId], references: [id])
  gateway           PaymentGateway  @relation(fields: [gatewayId], references: [id])
  user              User            @relation(fields: [userId], references: [id])
  subscription      Subscription?

  @@index([businessId])
  @@index([userId])
  @@index([status])
  @@index([gatewayId])
  @@index([transactionId])
  @@index([createdAt])
  @@index([businessId, status])
}

model Subscription {
  id           String    @id @default(cuid())
  businessId   String
  userId       String
  planType     PlanType
  messageQuota Int
  startDate    DateTime  @default(now())
  endDate      DateTime?
  isActive     Boolean   @default(true)
  autoRenew    Boolean   @default(false)
  paymentId    String?   @unique
  metadata     Json?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  business     Business  @relation(fields: [businessId], references: [id])
  payment      Payment?  @relation(fields: [paymentId], references: [id])
  user         User      @relation(fields: [userId], references: [id])

  @@index([businessId])
  @@index([userId])
  @@index([isActive])
  @@index([planType])
  @@index([endDate])
}

enum Role {
  SUPERADMIN
  CLIENT
  AGENT
}

enum ActivityType {
  RESTAURANT
  CAFE
  BAKERY
  CLINIC
  HOSPITAL
  PHARMACY
  DENTAL
  RETAIL
  FASHION
  ELECTRONICS
  JEWELRY
  FURNITURE
  COMPANY
  CONSULTING
  LEGAL
  ACCOUNTING
  REALESTATE
  EDUCATION
  SCHOOL
  UNIVERSITY
  BANK
  INSURANCE
  INVESTMENT
  HOTEL
  TRAVEL
  TOURISM
  SALON
  SPA
  GYM
  AUTOMOTIVE
  CARMAINTENANCE
  LOGISTICS
  CONSTRUCTION
  ARCHITECTURE
  INTERIOR
  IT
  MAINTENANCE
  SECURITY
  SOFTWARE
  TELECOM
  DIGITAL
  MARKETING
  DESIGN
  PHOTOGRAPHY
  EVENTS
  ECOMMERCE
  DROPSHIPPING
  OTHER
}

enum BusinessStatus {
  TRIAL
  ACTIVE
  SUSPENDED
  CANCELLED
}

enum PlanType {
  TRIAL
  BASIC
  PRO
  AGENCY
  ENTERPRISE
}

enum TicketStatus {
  OPEN
  IN_PROGRESS
  RESOLVED
  CLOSED
}

enum TicketPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

enum KnowledgeType {
  PDF
  TEXT
  URL
}

enum ConversationStatus {
  ACTIVE
  HANDOVER_REQUESTED
  AGENT_ACTIVE
  CLOSED
}

enum Channel {
  WIDGET
  WHATSAPP
  TELEGRAM
}

enum MessageRole {
  USER
  ASSISTANT
  SYSTEM
}

enum IntegrationType {
  WHATSAPP
  TELEGRAM
  FACEBOOK
}

enum SentimentType {
  POSITIVE
  NEGATIVE
  NEUTRAL
  MIXED
}

enum HandoffPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

enum HandoffStatus {
  PENDING
  ACCEPTED
  REJECTED
  COMPLETED
  TIMEOUT
}

enum APIType {
  REST
  GRAPHQL
  SOAP
}

enum CRMType {
  SALESFORCE
  HUBSPOT
  ZOHO
  PIPEDRIVE
  CUSTOM
}

enum WidgetType {
  CHART
  METRIC
  TABLE
  MAP
  TIMELINE
  CUSTOM
}

// WidgetVariant controls which client widget variant to serve or auto-switch to
enum WidgetVariant {
  STANDARD
  ENHANCED
}

enum AIModelStatus {
  TRAINING
  READY
  FAILED
  DEPLOYED
}

enum TrainingStatus {
  PENDING
  RUNNING
  COMPLETED
  FAILED
}

enum GapStatus {
  OPEN
  IN_PROGRESS
  RESOLVED
  IGNORED
}

enum GapPriority {
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

enum SuggestionType {
  CONTENT_UPDATE
  MODEL_TRAINING
  FEATURE_ENHANCEMENT
  INTEGRATION_SETUP
  WORKFLOW_IMPROVEMENT
}

enum SuggestionImpact {
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

enum SuggestionEffort {
  LOW
  MEDIUM
  HIGH
  VERY_HIGH
}

enum SuggestionStatus {
  PENDING
  APPROVED
  IMPLEMENTED
  REJECTED
}

enum GoalStatus {
  ACTIVE
  COMPLETED
  CANCELLED
  OVERDUE
}

enum LeadSource {
  PRE_CHAT_FORM
  MANUAL_ENTRY
  INTEGRATION
}

enum PaymentProvider {
  STRIPE
  PAYMOB
  PAYTABS
  PAYPAL
}

enum PaymentStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
  REFUNDED
}
