(function(){"use strict";var q,b,fe,R,he,ge,me,ye,oe,ne,re,L={},be=[],Ve=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,G=Array.isArray;function M(e,t){for(var o in t)e[o]=t[o];return e}function ie(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ve(e,t,o){var n,a,i,l={};for(i in t)i=="key"?n=t[i]:i=="ref"?a=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?q.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return J(e,l,n,a,null)}function J(e,t,o,n,a){var i={type:e,props:t,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++fe,__i:-1,__u:0};return a==null&&b.vnode!=null&&b.vnode(i),i}function U(e){return e.children}function K(e,t){this.props=e,this.context=t}function z(e,t){if(t==null)return e.__?z(e.__,e.__i+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?z(e):null}function xe(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return xe(e)}}function we(e){(!e.__d&&(e.__d=!0)&&R.push(e)&&!X.__r++||he!=b.debounceRendering)&&((he=b.debounceRendering)||ge)(X)}function X(){for(var e,t,o,n,a,i,l,s=1;R.length;)R.length>s&&R.sort(me),e=R.shift(),s=R.length,e.__d&&(o=void 0,n=void 0,a=(n=(t=e).__v).__e,i=[],l=[],t.__P&&((o=M({},n)).__v=n.__v+1,b.vnode&&b.vnode(o),ae(t.__P,o,n,t.__n,t.__P.namespaceURI,32&n.__u?[a]:null,i,a??z(n),!!(32&n.__u),l),o.__v=n.__v,o.__.__k[o.__i]=o,Ie(i,o,l),n.__e=n.__=null,o.__e!=a&&xe(o)));X.__r=0}function ke(e,t,o,n,a,i,l,s,u,_,h){var r,f,p,m,S,k,y,g=n&&n.__k||be,A=t.length;for(u=qe(o,t,g,u,A),r=0;r<A;r++)(p=o.__k[r])!=null&&(f=p.__i==-1?L:g[p.__i]||L,p.__i=r,k=ae(e,p,f,a,i,l,s,u,_,h),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&le(f.ref,null,p),h.push(p.ref,p.__c||m,p)),S==null&&m!=null&&(S=m),(y=!!(4&p.__u))||f.__k===p.__k?u=Se(p,u,e,y):typeof p.type=="function"&&k!==void 0?u=k:m&&(u=m.nextSibling),p.__u&=-7);return o.__e=S,u}function qe(e,t,o,n,a){var i,l,s,u,_,h=o.length,r=h,f=0;for(e.__k=new Array(a),i=0;i<a;i++)(l=t[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[i]=J(null,l,null,null,null):G(l)?l=e.__k[i]=J(U,{children:l},null,null,null):l.constructor==null&&l.__b>0?l=e.__k[i]=J(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[i]=l,u=i+f,l.__=e,l.__b=e.__b+1,(_=l.__i=Ge(l,o,u,r))!=-1&&(r--,(s=o[_])&&(s.__u|=2)),s==null||s.__v==null?(_==-1&&(a>h?f--:a<h&&f++),typeof l.type!="function"&&(l.__u|=4)):_!=u&&(_==u-1?f--:_==u+1?f++:(_>u?f--:f++,l.__u|=4))):e.__k[i]=null;if(r)for(i=0;i<h;i++)(s=o[i])!=null&&!(2&s.__u)&&(s.__e==n&&(n=z(s)),Ee(s,s));return n}function Se(e,t,o,n){var a,i;if(typeof e.type=="function"){for(a=e.__k,i=0;a&&i<a.length;i++)a[i]&&(a[i].__=e,t=Se(a[i],t,o,n));return t}e.__e!=t&&(n&&(t&&e.type&&!t.parentNode&&(t=z(e)),o.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ge(e,t,o,n){var a,i,l,s=e.key,u=e.type,_=t[o],h=_!=null&&(2&_.__u)==0;if(_===null&&s==null||h&&s==_.key&&u==_.type)return o;if(n>(h?1:0)){for(a=o-1,i=o+1;a>=0||i<t.length;)if((_=t[l=a>=0?a--:i++])!=null&&!(2&_.__u)&&s==_.key&&u==_.type)return l}return-1}function Ce(e,t,o){t[0]=="-"?e.setProperty(t,o??""):e[t]=o==null?"":typeof o!="number"||Ve.test(t)?o:o+"px"}function Q(e,t,o,n,a){var i,l;e:if(t=="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)o&&t in o||Ce(e.style,t,"");if(o)for(t in o)n&&o[t]==n[t]||Ce(e.style,t,o[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(ye,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=o,o?n?o.u=n.u:(o.u=oe,e.addEventListener(t,i?re:ne,i)):e.removeEventListener(t,i?re:ne,i);else{if(a=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&o==1?"":o))}}function Fe(e){return function(t){if(this.l){var o=this.l[t.type+e];if(t.t==null)t.t=oe++;else if(t.t<o.u)return;return o(b.event?b.event(t):t)}}}function ae(e,t,o,n,a,i,l,s,u,_){var h,r,f,p,m,S,k,y,g,A,T,B,$,j,D,O,N,C=t.type;if(t.constructor!=null)return null;128&o.__u&&(u=!!(32&o.__u),i=[s=t.__e=o.__e]),(h=b.__b)&&h(t);e:if(typeof C=="function")try{if(y=t.props,g="prototype"in C&&C.prototype.render,A=(h=C.contextType)&&n[h.__c],T=h?A?A.props.value:h.__:n,o.__c?k=(r=t.__c=o.__c).__=r.__E:(g?t.__c=r=new C(y,T):(t.__c=r=new K(y,T),r.constructor=C,r.render=Ke),A&&A.sub(r),r.state||(r.state={}),r.__n=n,f=r.__d=!0,r.__h=[],r._sb=[]),g&&r.__s==null&&(r.__s=r.state),g&&C.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=M({},r.__s)),M(r.__s,C.getDerivedStateFromProps(y,r.__s))),p=r.props,m=r.state,r.__v=t,f)g&&C.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),g&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(g&&C.getDerivedStateFromProps==null&&y!==p&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(y,T),t.__v==o.__v||!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(y,r.__s,T)===!1){for(t.__v!=o.__v&&(r.props=y,r.state=r.__s,r.__d=!1),t.__e=o.__e,t.__k=o.__k,t.__k.some(function(E){E&&(E.__=t)}),B=0;B<r._sb.length;B++)r.__h.push(r._sb[B]);r._sb=[],r.__h.length&&l.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(y,r.__s,T),g&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(p,m,S)})}if(r.context=T,r.props=y,r.__P=e,r.__e=!1,$=b.__r,j=0,g){for(r.state=r.__s,r.__d=!1,$&&$(t),h=r.render(r.props,r.state,r.context),D=0;D<r._sb.length;D++)r.__h.push(r._sb[D]);r._sb=[]}else do r.__d=!1,$&&$(t),h=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++j<25);r.state=r.__s,r.getChildContext!=null&&(n=M(M({},n),r.getChildContext())),g&&!f&&r.getSnapshotBeforeUpdate!=null&&(S=r.getSnapshotBeforeUpdate(p,m)),O=h,h!=null&&h.type===U&&h.key==null&&(O=Ae(h.props.children)),s=ke(e,G(O)?O:[O],t,o,n,a,i,l,s,u,_),r.base=t.__e,t.__u&=-161,r.__h.length&&l.push(r),k&&(r.__E=r.__=null)}catch(E){if(t.__v=null,u||i!=null)if(E.then){for(t.__u|=u?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,t.__e=s}else{for(N=i.length;N--;)ie(i[N]);_e(t)}else t.__e=o.__e,t.__k=o.__k,E.then||_e(t);b.__e(E,t,o)}else i==null&&t.__v==o.__v?(t.__k=o.__k,t.__e=o.__e):s=t.__e=Je(o.__e,t,o,n,a,i,l,u,_);return(h=b.diffed)&&h(t),128&t.__u?void 0:s}function _e(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(_e)}function Ie(e,t,o){for(var n=0;n<o.length;n++)le(o[n],o[++n],o[++n]);b.__c&&b.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){b.__e(i,a.__v)}})}function Ae(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:G(e)?e.map(Ae):M({},e)}function Je(e,t,o,n,a,i,l,s,u){var _,h,r,f,p,m,S,k=o.props||L,y=t.props,g=t.type;if(g=="svg"?a="http://www.w3.org/2000/svg":g=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(_=0;_<i.length;_++)if((p=i[_])&&"setAttribute"in p==!!g&&(g?p.localName==g:p.nodeType==3)){e=p,i[_]=null;break}}if(e==null){if(g==null)return document.createTextNode(y);e=document.createElementNS(a,g,y.is&&y),s&&(b.__m&&b.__m(t,i),s=!1),i=null}if(g==null)k===y||s&&e.data==y||(e.data=y);else{if(i=i&&q.call(e.childNodes),!s&&i!=null)for(k={},_=0;_<e.attributes.length;_++)k[(p=e.attributes[_]).name]=p.value;for(_ in k)if(p=k[_],_!="children"){if(_=="dangerouslySetInnerHTML")r=p;else if(!(_ in y)){if(_=="value"&&"defaultValue"in y||_=="checked"&&"defaultChecked"in y)continue;Q(e,_,null,p,a)}}for(_ in y)p=y[_],_=="children"?f=p:_=="dangerouslySetInnerHTML"?h=p:_=="value"?m=p:_=="checked"?S=p:s&&typeof p!="function"||k[_]===p||Q(e,_,p,k[_],a);if(h)s||r&&(h.__html==r.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(r&&(e.innerHTML=""),ke(t.type=="template"?e.content:e,G(f)?f:[f],t,o,n,g=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,l,i?i[0]:o.__k&&z(o,0),s,u),i!=null)for(_=i.length;_--;)ie(i[_]);s||(_="value",g=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[_]||g=="progress"&&!m||g=="option"&&m!=k[_])&&Q(e,_,m,k[_],a),_="checked",S!=null&&S!=e[_]&&Q(e,_,S,k[_],a))}return e}function le(e,t,o){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(a){b.__e(a,o)}}function Ee(e,t,o){var n,a;if(b.unmount&&b.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||le(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){b.__e(i,t)}n.base=n.__P=null}if(n=e.__k)for(a=0;a<n.length;a++)n[a]&&Ee(n[a],t,o||typeof e.type!="function");o||ie(e.__e),e.__c=e.__=e.__e=void 0}function Ke(e,t,o){return this.constructor(e,o)}function Xe(e,t,o){var n,a,i,l;t==document&&(t=document.documentElement),b.__&&b.__(e,t),a=(n=!1)?null:t.__k,i=[],l=[],ae(t,e=t.__k=ve(U,null,[e]),a||L,L,t.namespaceURI,a?null:t.firstChild?q.call(t.childNodes):null,i,a?a.__e:t.firstChild,n,l),Ie(i,e,l)}q=be.slice,b={__e:function(e,t,o,n){for(var a,i,l;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),l=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,n||{}),l=a.__d),l)return a.__E=a}catch(s){e=s}throw e}},fe=0,K.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=M({},this.state),typeof e=="function"&&(e=e(M({},o),this.props)),e&&M(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),we(this))},K.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),we(this))},K.prototype.render=U,R=[],ge=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,me=function(e,t){return e.__v.__b-t.__v.__b},X.__r=0,ye=/(PointerCapture)$|Capture$/i,oe=0,ne=Fe(!1),re=Fe(!0);var Qe=0;function d(e,t,o,n,a,i){t||(t={});var l,s,u=t;if("ref"in u)for(s in u={},t)s=="ref"?l=t[s]:u[s]=t[s];var _={type:e,props:u,key:o,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Qe,__i:-1,__u:0,__source:a,__self:i};if(typeof e=="function"&&(l=e.defaultProps))for(s in l)u[s]===void 0&&(u[s]=l[s]);return b.vnode&&b.vnode(_),_}var W,v,se,$e,Z=0,Me=[],w=b,Te=w.__b,He=w.__r,Re=w.diffed,Be=w.__c,Oe=w.unmount,Ne=w.__;function ce(e,t){w.__h&&w.__h(v,e,Z||t),Z=0;var o=v.__H||(v.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function I(e){return Z=1,Ze(Le,e)}function Ze(e,t,o){var n=ce(W++,2);if(n.t=e,!n.__c&&(n.__=[Le(void 0,t),function(s){var u=n.__N?n.__N[0]:n.__[0],_=n.t(u,s);u!==_&&(n.__N=[_,n.__[1]],n.__c.setState({}))}],n.__c=v,!v.__f)){var a=function(s,u,_){if(!n.__c.__H)return!0;var h=n.__c.__H.__.filter(function(f){return!!f.__c});if(h.every(function(f){return!f.__N}))return!i||i.call(this,s,u,_);var r=n.__c.props!==s;return h.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(r=!0)}}),i&&i.call(this,s,u,_)||r};v.__f=!0;var i=v.shouldComponentUpdate,l=v.componentWillUpdate;v.componentWillUpdate=function(s,u,_){if(this.__e){var h=i;i=void 0,a(s,u,_),i=h}l&&l.call(this,s,u,_)},v.shouldComponentUpdate=a}return n.__N||n.__}function de(e,t){var o=ce(W++,3);!w.__s&&Pe(o.__H,t)&&(o.__=e,o.u=t,v.__H.__h.push(o))}function ze(e){return Z=5,et(function(){return{current:e}},[])}function et(e,t){var o=ce(W++,7);return Pe(o.__H,t)&&(o.__=e(),o.__H=t,o.__h=e),o.__}function tt(){for(var e;e=Me.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ee),e.__H.__h.forEach(ue),e.__H.__h=[]}catch(t){e.__H.__h=[],w.__e(t,e.__v)}}w.__b=function(e){v=null,Te&&Te(e)},w.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ne&&Ne(e,t)},w.__r=function(e){He&&He(e),W=0;var t=(v=e.__c).__H;t&&(se===v?(t.__h=[],v.__h=[],t.__.forEach(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(t.__h.forEach(ee),t.__h.forEach(ue),t.__h=[],W=0)),se=v},w.diffed=function(e){Re&&Re(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Me.push(t)!==1&&$e===w.requestAnimationFrame||(($e=w.requestAnimationFrame)||ot)(tt)),t.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.u=void 0})),se=v=null},w.__c=function(e,t){t.some(function(o){try{o.__h.forEach(ee),o.__h=o.__h.filter(function(n){return!n.__||ue(n)})}catch(n){t.some(function(a){a.__h&&(a.__h=[])}),t=[],w.__e(n,o.__v)}}),Be&&Be(e,t)},w.unmount=function(e){Oe&&Oe(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach(function(n){try{ee(n)}catch(a){t=a}}),o.__H=void 0,t&&w.__e(t,o.__v))};var De=typeof requestAnimationFrame=="function";function ot(e){var t,o=function(){clearTimeout(n),De&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(o,35);De&&(t=requestAnimationFrame(o))}function ee(e){var t=v,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),v=t}function ue(e){var t=v;e.__c=e.__(),v=t}function Pe(e,t){return!e||e.length!==t.length||t.some(function(o,n){return o!==e[n]})}function Le(e,t){return typeof t=="function"?t(e):t}const Ue=(e,t)=>"#"+e.replace(/^#/,"").replace(/../g,o=>("0"+Math.min(255,Math.max(0,parseInt(o,16)+t)).toString(16)).substr(-2)),te=()=>Math.random().toString(36).substring(2,15);function nt({config:e,variant:t,businessId:o,assetBaseUrl:n}){var Ye;const[a,i]=I(!1),[l,s]=I([]),[u,_]=I(""),[h,r]=I(!1),[f,p]=I(!1),[m,S]=I(null),[k,y]=I(!1),[g,A]=I(0),[T,B]=I(0),[$,j]=I(!1),[D,O]=I(""),N=ze(null),C=ze(null),E=`fahimo-chat-${o}`;de(()=>{let c=localStorage.getItem(`fahimo-visitor-${o}`);c||(c=`v_${te()}`,localStorage.setItem(`fahimo-visitor-${o}`,c)),O(c);const x=localStorage.getItem(E);if(x)try{const F=JSON.parse(x);s(F.messages||[]),S(F.conversationId),A(F.rating||0),j(F.ratingSubmitted||!1)}catch(F){console.error("Failed to load chat session:",F)}const Y=localStorage.getItem(`fahimo-mute-${o}`);Y&&r(Y==="true")},[o,E]),de(()=>{if(l.length>0||m){const c={conversationId:m,messages:l,rating:g,ratingSubmitted:$};localStorage.setItem(E,JSON.stringify(c))}},[l,m,g,$,E]),de(()=>{var c;(c=C.current)==null||c.scrollIntoView({behavior:"smooth"})},[l]);const rt=()=>{const c=!h;r(c),localStorage.setItem(`fahimo-mute-${o}`,String(c))},pe=()=>{!h&&N.current&&N.current.play().catch(()=>{})},We=()=>{const c=!a;i(c),c&&pe()},je=async()=>{var Y;if(!u.trim()||f)return;const c=u.trim(),x={id:te(),text:c,sender:"user",timestamp:Date.now()};s(F=>[...F,x]),_(""),p(!0),pe();try{const F=window.__FAHIMO_API_URL||"https://fahimo-api.onrender.com",V=await fetch(`${F}/api/chat/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessId:o,conversationId:m,visitorId:D,content:c,senderType:"USER"})});if(!V.ok)throw new Error(`HTTP ${V.status}`);const P=await V.json();P.conversationId&&!m&&S(P.conversationId);const lt={id:te(),text:P.content||((Y=P.botMessage)==null?void 0:Y.content)||"Sorry, I could not process your message.",sender:"bot",timestamp:Date.now()};s(st=>[...st,lt]),pe()}catch(F){console.error("Chat error:",F);const V={id:te(),text:"Sorry, there was an error. Please try again.",sender:"bot",timestamp:Date.now()};s(P=>[...P,V])}finally{p(!1)}},it=async c=>{A(c),j(!0);try{const x=window.__FAHIMO_API_URL||"https://fahimo-api.onrender.com";await fetch(`${x}/api/chat/rate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({businessId:o,conversationId:m,rating:c})})}catch(x){console.error("Rating submission error:",x)}setTimeout(()=>y(!1),2e3)},at=()=>{!$&&l.length>0&&y(!0)},H=e.primaryColor||"#6366F1",_t=n?`${n}/sounds/notification.mp3`:"/sounds/notification.mp3";return d("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:2147483647,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},children:[d("audio",{ref:N,src:_t,preload:"auto"}),a&&d("div",{style:{width:t==="enhanced"?"380px":"360px",height:t==="enhanced"?"580px":"520px",backgroundColor:"#ffffff",borderRadius:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.15), 0 0 0 1px rgba(0,0,0,0.05)",display:"flex",flexDirection:"column",marginBottom:"16px",overflow:"hidden",animation:"fahimo-balloon-in 0.45s cubic-bezier(0.34, 1.56, 0.64, 1)",transformOrigin:"bottom right"},children:[d("style",{children:`
            @keyframes fahimo-balloon-in {
              0% { 
                opacity: 0; 
                transform: scale(0.3) translateY(30px); 
              }
              60% { 
                opacity: 1; 
                transform: scale(1.08) translateY(0); 
              }
              100% { 
                transform: scale(1) translateY(0); 
              }
            }
            @keyframes fahimo-fade-in {
              from { opacity: 0; transform: translateY(8px); }
              to { opacity: 1; transform: translateY(0); }
            }
            @keyframes fahimo-pulse {
              0%, 100% { opacity: 0.4; }
              50% { opacity: 1; }
            }
            @keyframes fahimo-star-pop {
              0% { transform: scale(1); }
              50% { transform: scale(1.3); }
              100% { transform: scale(1); }
            }
            .fahimo-scroll::-webkit-scrollbar { width: 5px; }
            .fahimo-scroll::-webkit-scrollbar-track { background: transparent; }
            .fahimo-scroll::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 10px; }
            .fahimo-msg { animation: fahimo-fade-in 0.3s ease-out forwards; }
            .fahimo-typing span { animation: fahimo-pulse 1.4s infinite; }
            .fahimo-typing span:nth-child(2) { animation-delay: 0.2s; }
            .fahimo-typing span:nth-child(3) { animation-delay: 0.4s; }
            .fahimo-star { cursor: pointer; transition: transform 0.2s, color 0.2s; }
            .fahimo-star:hover { transform: scale(1.2); }
            .fahimo-star.selected { animation: fahimo-star-pop 0.3s ease-out; }
          `}),d("div",{style:{background:`linear-gradient(145deg, ${H}, ${Ue(H,-25)})`,color:"white",padding:"18px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[d("div",{style:{position:"relative"},children:[d("div",{style:{width:44,height:44,borderRadius:"50%",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:"ðŸ¤–"}),d("div",{style:{position:"absolute",bottom:0,right:0,width:12,height:12,backgroundColor:"#22C55E",borderRadius:"50%",border:"2px solid white"}})]}),d("div",{children:[d("div",{style:{fontWeight:"600",fontSize:"15px"},children:((Ye=e.welcomeMessage)==null?void 0:Ye.split("!")[0])||"AI Assistant"}),d("div",{style:{fontSize:"12px",opacity:.85,display:"flex",alignItems:"center",gap:"5px"},children:[d("span",{style:{width:6,height:6,backgroundColor:"#22C55E",borderRadius:"50%"}}),"Always online"]})]})]}),d("div",{style:{display:"flex",gap:"8px"},children:[d("button",{onClick:rt,style:{background:"rgba(255,255,255,0.15)",border:"none",color:"white",cursor:"pointer",width:34,height:34,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",transition:"background 0.2s"},onMouseOver:c=>c.currentTarget.style.background="rgba(255,255,255,0.25)",onMouseOut:c=>c.currentTarget.style.background="rgba(255,255,255,0.15)",children:h?"ðŸ”‡":"ðŸ”Š"}),l.length>0&&d("button",{onClick:at,title:"End & Rate",style:{background:"rgba(255,255,255,0.15)",border:"none",color:"white",cursor:"pointer",width:34,height:34,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",transition:"background 0.2s"},onMouseOver:c=>c.currentTarget.style.background="rgba(255,255,255,0.25)",onMouseOut:c=>c.currentTarget.style.background="rgba(255,255,255,0.15)",children:"â­"}),d("button",{onClick:We,style:{background:"rgba(255,255,255,0.15)",border:"none",color:"white",cursor:"pointer",width:34,height:34,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",transition:"background 0.2s"},onMouseOver:c=>c.currentTarget.style.background="rgba(255,255,255,0.25)",onMouseOut:c=>c.currentTarget.style.background="rgba(255,255,255,0.15)",children:"âœ•"})]})]}),k&&d("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.97)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:10,animation:"fahimo-fade-in 0.3s ease-out"},children:$?d("div",{style:{textAlign:"center"},children:[d("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"ðŸŽ‰"}),d("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1F2937"},children:"Thank you!"}),d("div",{style:{fontSize:"14px",color:"#6B7280",marginTop:"8px"},children:"Your feedback helps us improve"})]}):d(U,{children:[d("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937",marginBottom:"8px"},children:"How was your experience?"}),d("div",{style:{fontSize:"13px",color:"#6B7280",marginBottom:"20px"},children:"Rate your conversation"}),d("div",{style:{display:"flex",gap:"8px"},children:[1,2,3,4,5].map(c=>d("span",{className:`fahimo-star ${g>=c?"selected":""}`,onClick:()=>it(c),onMouseEnter:()=>B(c),onMouseLeave:()=>B(0),style:{fontSize:"36px",color:(T||g)>=c?"#FBBF24":"#E5E7EB",transition:"color 0.2s"},children:"â˜…"},c))}),d("button",{onClick:()=>y(!1),style:{marginTop:"24px",padding:"8px 20px",background:"transparent",border:"1px solid #E5E7EB",borderRadius:"20px",color:"#6B7280",cursor:"pointer",fontSize:"13px"},children:"Skip"})]})}),d("div",{className:"fahimo-scroll",style:{flex:1,padding:"20px",overflowY:"auto",backgroundColor:"#F9FAFB",display:"flex",flexDirection:"column",gap:"14px"},children:[l.length===0&&d("div",{style:{textAlign:"center",marginTop:"60px",animation:"fahimo-fade-in 0.5s ease-out"},children:[d("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"ðŸ‘‹"}),d("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1F2937",marginBottom:"8px"},children:e.welcomeMessage||"Hello! How can I help you today?"}),d("div",{style:{fontSize:"13px",color:"#9CA3AF"},children:"Ask me anything, I'm here to help!"})]}),l.map(c=>d("div",{className:"fahimo-msg",style:{alignSelf:c.sender==="user"?"flex-end":"flex-start",maxWidth:"80%"},children:[d("div",{style:{padding:"12px 16px",borderRadius:c.sender==="user"?"18px 18px 4px 18px":"18px 18px 18px 4px",backgroundColor:c.sender==="user"?H:"white",color:c.sender==="user"?"white":"#1F2937",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",fontSize:"14px",lineHeight:"1.5",wordBreak:"break-word"},children:c.text}),d("div",{style:{fontSize:"11px",color:"#9CA3AF",marginTop:"4px",textAlign:c.sender==="user"?"right":"left",paddingX:"4px"},children:new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},c.id)),f&&d("div",{className:"fahimo-msg",style:{alignSelf:"flex-start"},children:d("div",{className:"fahimo-typing",style:{padding:"14px 20px",borderRadius:"18px 18px 18px 4px",backgroundColor:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",display:"flex",gap:"4px"},children:[d("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:"#9CA3AF"}}),d("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:"#9CA3AF"}}),d("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:"#9CA3AF"}})]})}),d("div",{ref:C})]}),d("div",{style:{padding:"16px",borderTop:"1px solid #F3F4F6",backgroundColor:"white"},children:d("div",{style:{display:"flex",gap:"10px",alignItems:"flex-end"},children:[d("textarea",{value:u,onInput:c=>{const x=c.target;_(x.value),x.style.height="auto",x.style.height=Math.min(x.scrollHeight,100)+"px"},onKeyDown:c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),je())},placeholder:"Type your message...",disabled:f,style:{flex:1,padding:"12px 16px",borderRadius:"24px",border:"1px solid #E5E7EB",outline:"none",fontSize:"14px",resize:"none",height:"46px",maxHeight:"100px",fontFamily:"inherit",backgroundColor:"#F9FAFB",transition:"border-color 0.2s, box-shadow 0.2s, background-color 0.2s"},onFocus:c=>{const x=c.target;x.style.borderColor=H,x.style.boxShadow=`0 0 0 3px ${H}20`,x.style.backgroundColor="white"},onBlur:c=>{const x=c.target;x.style.borderColor="#E5E7EB",x.style.boxShadow="none",x.style.backgroundColor="#F9FAFB"}}),d("button",{onClick:je,disabled:!u.trim()||f,style:{padding:"12px",borderRadius:"50%",backgroundColor:u.trim()&&!f?H:"#E5E7EB",color:"white",border:"none",cursor:u.trim()&&!f?"pointer":"not-allowed",width:"46px",height:"46px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",flexShrink:0},children:d("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[d("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),d("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})}),d("div",{style:{textAlign:"center",padding:"10px",fontSize:"11px",color:"#9CA3AF",backgroundColor:"#F9FAFB",borderTop:"1px solid #F3F4F6"},children:["Powered by ",d("a",{href:"https://faheemly.com",target:"_blank",rel:"noopener",style:{color:H,textDecoration:"none",fontWeight:"600"},children:"Faheemly AI"})]})]}),!a&&d("button",{onClick:We,style:{width:"64px",height:"64px",borderRadius:"32px",background:`linear-gradient(145deg, ${H}, ${Ue(H,-20)})`,color:"white",border:"none",boxShadow:"0 6px 24px rgba(0,0,0,0.18)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s",animation:"fahimo-pop-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)"},onMouseOver:c=>{c.currentTarget.style.transform="scale(1.1)",c.currentTarget.style.boxShadow="0 8px 32px rgba(0,0,0,0.22)"},onMouseOut:c=>{c.currentTarget.style.transform="scale(1)",c.currentTarget.style.boxShadow="0 6px 24px rgba(0,0,0,0.18)"},children:[d("style",{children:`
            @keyframes fahimo-pop-in {
              from { transform: scale(0) rotate(-180deg); opacity: 0; }
              to { transform: scale(1) rotate(0); opacity: 1; }
            }
          `}),d("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),l.length>0&&d("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"18px",height:"18px",backgroundColor:"#EF4444",borderRadius:"50%",border:"2px solid white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:l.length>9?"9+":l.length})]})]})}(function(){if(window.__FAHIMO_WIDGET_LOADER)return;window.__FAHIMO_WIDGET_LOADER={initialized:!0};const e=document.currentScript,t=e==null?void 0:e.getAttribute("data-business-id");if(!t){console.error("[Fahimo] Business ID is missing.");return}let o="https://fahimo-api.onrender.com";const n=e.getAttribute("data-api-url");n&&(o=n);let a="https://fahimo.com";if(e.src)try{a=new URL(e.src).origin}catch{console.warn("[Fahimo] Could not determine asset base URL from script src")}let i=null;function l(){document.getElementById("fahimo-widget-root")||fetch(`${o}/api/widget/config/${t}`).then(_=>_.json()).then(_=>{if(!_||!_.widgetConfig)throw new Error("Invalid config");s(_.widgetVariant,_,o,t,a)}).catch(_=>{console.error("[Fahimo] Failed to load widget config:",_)})}function s(_,h,r,f,p){console.log(`[Fahimo] Loading ${_} widget for ${f}`),window.__FAHIMO_CONFIG=h,window.__FAHIMO_API_URL=r,window.__FAHIMO_BUSINESS_ID=f;const m=document.createElement("div");m.id="fahimo-widget-root",document.body.appendChild(m),i=m,Xe(ve(nt,{config:h.widgetConfig,variant:_,businessId:f,assetBaseUrl:p}),m)}document.readyState==="complete"||document.readyState==="interactive"?l():window.addEventListener("DOMContentLoaded",l),new MutationObserver(_=>{document.body.contains(i)||l()}).observe(document.body,{childList:!0,subtree:!1})})()})();
